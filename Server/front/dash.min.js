(()=>{"use strict";const t=document.getElementById("form");t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)})();const start_date=document.getElementById("start_date"),end_date=document.getElementById("end_date"),form=document.getElementById("form"),sww="Something went wrong! Please try again later",log_out=()=>{document.cookie="login=;expires=Thu, 01 Jan 1970 00:00:00 UTC;",window.location.replace(`${location.protocol}//${location.host}/login`)},date_form_string=e=>`${String(e.getFullYear()).padStart(4,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}T${String(e.getHours()).padStart(2,"0")}:`+String(e.getMinutes()).padStart(2,"0"),check_start=()=>{var e;(""===end_date.value||Date.parse(end_date.value)<Date.parse(start_date.value))&&((e=new Date).setTime(Date.parse(start_date.value)+864e5),end_date.value=date_form_string(e))},check_end=()=>{var e;(""===start_date.value||Date.parse(end_date.value)<Date.parse(start_date.value))&&((e=new Date).setTime(Date.parse(end_date.value)-864e5),start_date.value=date_form_string(e))},sendData=(start_date.addEventListener("input",check_start),end_date.addEventListener("input",check_end),()=>{var e=new XMLHttpRequest,t=new FormData(form),a=(e.addEventListener("load",e=>{switch(e.target.status){case 200:var t=JSON.parse(e.target.responseText),a=document.createElement("a");a.href=t.redirect,a.download=t.name,document.body.appendChild(a),a.click(),document.body.removeChild(a);break;case 400:alert(sww),console.error("Form deserialization error "+e.target.responseText);break;case 500:alert(sww),console.error("Server error");break;case 404:alert(sww),console.error("Submit POST request not found")}}),e.addEventListener("error",e=>{alert(sww)}),e.open("POST",location.protocol+"//"+location.host+location.pathname),e.setRequestHeader("content-type","application/json"),new Date),r=(a.setTime(Date.parse(t.get("start"))),a.toISOString()),a=(a.setTime(Date.parse(t.get("end"))),a.toISOString());e.send(JSON.stringify({start:r,end:a,format:t.get("format")}))});form.addEventListener("submit",e=>{e.preventDefault(),sendData()});